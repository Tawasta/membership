<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="contract_invite_consent">
        <t t-call="website.layout">
            <div id="wrap" class="o_website_invite">
                <div class="container mt-5 mb-5">
                    <div class="row justify-content-center">
                        <div class="col-md-6">
                            <div class="card text-center">
                                <div class="card-header">
                                    <h2>Acceptance of the Contract</h2>
                                </div>
                                <div class="card-body">

                                    <!-- Pull the custom message from contract line's
                                    product, if one exists, and there is only one contract line. Fall back to default text otherwise -->
                                    <t
                                        t-if="consent_record.contract_id
                                        and len(consent_record.contract_id.contract_line_ids) == 1
                                        and consent_record.contract_id.contract_line_ids[0].product_id
                                        and consent_record.contract_id.contract_line_ids[0].product_id.custom_consent_text_initial_msg"
                                    >
                                        <t
                                            t-raw="consent_record.contract_id.contract_line_ids[0].product_id.custom_consent_text_initial_msg"
                                        />
                                    </t>
                                    <t t-else="">
                                        <p
                                        >You have been invited to accept a contract.</p>
                                    </t>
                                    <!-- Button to Open the Modal -->
                                    <button
                                        type="button"
                                        class="btn btn-primary"
                                        data-toggle="modal"
                                        data-target="#consentModal"
                                    >
                                        Continue to Accept
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal -->
                <div
                    class="modal fade"
                    id="consentModal"
                    tabindex="-1"
                    role="dialog"
                    aria-labelledby="consentModalLabel"
                    aria-hidden="true"
                >
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5
                                    class="modal-title"
                                    id="consentModalLabel"
                                >Confirm Your Consent</h5>
                                <button
                                    type="button"
                                    class="close"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                >
                                    <span aria-label="Close">&amp;times;</span>
                                </button>
                            </div>
                            <div class="modal-body">

                                <!-- Pull the custom message from contract line's
                                product, if one exists, and there is only one contract line. Fall back to default text otherwise -->
                                <t
                                    t-if="consent_record.contract_id
                                    and len(consent_record.contract_id.contract_line_ids) == 1
                                    and consent_record.contract_id.contract_line_ids[0].product_id
                                    and consent_record.contract_id.contract_line_ids[0].product_id.custom_consent_text_popup_msg"
                                >
                                    <t
                                        t-raw="consent_record.contract_id.contract_line_ids[0].product_id.custom_consent_text_popup_msg"
                                    />
                                </t>
                                <t t-else="">
                                    You are about to give your consent. Are you sure?
                                </t>

                            </div>
                            <div class="modal-footer">
                                <form
                                    t-att-action="'/contract/consent/accept/' + consent_record.code"
                                    method="post"
                                >
                                    <input
                                        type="hidden"
                                        name="csrf_token"
                                        t-att-value="request.csrf_token()"
                                    />
                                    <button
                                        type="button"
                                        class="btn btn-secondary"
                                        data-dismiss="modal"
                                    >Cancel</button>
                                    <button
                                        type="submit"
                                        class="btn btn-primary"
                                    >Save</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="contract_consent_success" name="Contract Consent Success">
        <t t-call="website.layout">
            <div id="wrap" class="o_website_consent_success">
                <div class="container mt-5 mb-5">
                    <div class="row justify-content-center">
                        <div class="col-md-6">
                            <div class="card text-center">
                                <div class="card-header">
                                    <h2>Thank You for Confirming!</h2>
                                </div>
                                <div class="card-body">
                                    <!-- Pull the custom message from contract line's
                                    product, if one exists, and there is only one contract line. Fall back to default text otherwise -->
                                    <t
                                        t-if="consent_record.contract_id
                                        and len(consent_record.contract_id.contract_line_ids) == 1
                                        and consent_record.contract_id.contract_line_ids[0].product_id
                                        and consent_record.contract_id.contract_line_ids[0].product_id.custom_consent_text_confirmation_msg"
                                    >
                                        <t
                                            t-raw="consent_record.contract_id.contract_line_ids[0].product_id.custom_consent_text_confirmation_msg"
                                        />
                                    </t>
                                    <t t-else="">
                                        <p
                                        >Your consent for the contract creation has been successfully registered.</p>
                                    </t>

                                    <a
                                        href="/"
                                        class="btn btn-success mt-4"
                                    >Return to Home Page</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>
